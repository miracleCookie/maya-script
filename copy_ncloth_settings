import maya.cmds as MC

# Get a list of selected objects
selected_objects = MC.ls(type="nCloth")

def find_mainCloth_values(obj):
    main_cloth_obj = obj
    # Define an empty list to store nCloth attributes
    ncloth_attrs = {}
    attrs_to_take = ['collide','selfCollide','friction','stretchResistance','bendResistance','bendAngleDropoff','pointMass','lift','drag','tangentialDrag','damp','stretchDamp','scalingRelation','ignoreSolverGravity','ignoreSolverWind','selfTrappedCheck','pushOutRadius','maxSelfCollisionIterations']
    
    #check if obj is a ncloth obj
    if MC.nodeType(main_cloth_obj) == 'nCloth':
    #list all attrs 
        obj_attrs = MC.listAttr(main_cloth_obj)
      
     #check that the attrs are in the apporved list  
        for attr in obj_attrs:
            if attr in attrs_to_take:
                key = "{}".format(attr)
                new_value = MC.getAttr(main_cloth_obj + ".{}".format(attr))
                #fill dictionary with list of settings and values
                ncloth_attrs.update({key: new_value})
            
    return ncloth_attrs        

#apply setting to cloth 
def apply_settings_to_cloth(settings):
    main_settings = settings
    
    #select all other obj apart from main 
    cloth_to_apply_settings = selected_objects[1:]
    
    #iterates every item in the dictionary and applys the settings 
    for each in cloth_to_apply_settings:
        for attr, value in main_settings.items():
            MC.setAttr(each + "." + attr, value)
            
    
main_settings_dictionary = find_mainCloth_values(selected_objects[0])
apply_settings_to_cloth(main_settings_dictionary)


